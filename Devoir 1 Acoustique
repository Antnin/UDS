%Données
c=785.2; % la vitesse du fluide en m/s
t=0.001; % 1 milliseconde en s
f=100; % la fréquence en Hz

% Angle en degrés avec l'axe horizontal (x)
anglex_deg = 30;

% Conversion de l'angle en radians
anglex_rad = deg2rad(anglex_deg);

% Angle en degrés avec l'axe vertical (y)
angley_deg = 90 - anglex_deg;

% Conversion degré en radian
angley_rad = deg2rad(angley_deg);

% Coordonnées du point de passage
x0 = c*t*cos(anglex_rad);
y0 = c*t*sin(anglex_rad);

%Tracé de la droite du front d'onde

% Coefficients de pente
m = -tan(angley_rad);

%Ordonnée à l origine
ordonnee_origine=y0-m*x0

% Création d'un vecteur x
x = linspace(0, 10, 100);

% Calcul des coordonnées y correspondantes
y = ordonnee_origine + m*x;

% Tracé de la droite
plot(x, y, 'b', 'LineWidth', 2, 'DisplayName', "Front D'onde"); hold on;

% Tracé du micro de ref
plot(0, 0, 'go', 'MarkerSize', 8, 'MarkerFaceColor', 'black', 'DisplayName', "Micro référence");


%Tracé de k
% Calcul des coordonnées finales du vecteur k (dépend de f)
x_k = 2*pi*f/c*cos(anglex_rad);
y_k = 2*pi*f/c*sin(anglex_rad);

% Tracé du vecteur k
hold on;
quiver(x0, y0, x_k, y_k, 'Color', 'red', 'LineWidth', 2, 'DisplayName', 'k');
hold on;

%Tracé de n
nx=0.867;
ny=0.5;
x02=x0-0.03;% Pour que les vecteurs ne soient pas superposés sur le graphique
y02=y0+0.03;

% Norme du vecteur
normen = sqrt(nx^2+ny^2);

% Calcul des coordonnées finales du vecteur
x_n = normen*cos(anglex_rad);
y_n = normen*sin(anglex_rad);

% Tracé du vecteur
hold on;
quiver(x02, y02, x_n, y_n, 'Color', 'green', 'LineWidth', 2,'DisplayName', 'n');


%Graphique
legend()
axis equal;
axis([0, 3, 0, 3]);
xlabel('x');
ylabel('y');
title("Front d'onde 1ms après micro réf.");
hold off;
